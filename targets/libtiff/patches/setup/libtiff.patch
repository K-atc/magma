--- a/CMakeLists.txt
+++ b/CMakeLists.txt
@@ -702,8 +702,6 @@
 add_subdirectory(port)
 add_subdirectory(libtiff)
 add_subdirectory(tools)
-add_subdirectory(test)
-add_subdirectory(contrib)
 add_subdirectory(build)
 add_subdirectory(man)
 add_subdirectory(html)

--- a/libtiff/CMakeLists.txt
+++ b/libtiff/CMakeLists.txt
@@ -192,2 +192,2 @@
-add_executable(mkg3states)
-target_sources(mkg3states PRIVATE mkg3states.c tif_fax3.h)
+add_executable(mkg3states mkg3states.c tif_fax3.h)
+# target_sources(mkg3states PRIVATE mkg3states.c tif_fax3.h)

--- a/tools/CMakeLists.txt
+++ b/tools/CMakeLists.txt
@@ -22,83 +22,83 @@
 # LIABILITY, ARISING OUT OF OR IN CONNECTION WITH THE USE OR PERFORMANCE
 # OF THIS SOFTWARE.
 
-add_executable(fax2ps)
+add_executable(fax2ps fax2ps.c)
 target_sources(fax2ps PRIVATE fax2ps.c)
 target_link_libraries(fax2ps PRIVATE tiff port)
 
-add_executable(fax2tiff)
+add_executable(fax2tiff fax2tiff.c)
 target_sources(fax2tiff PRIVATE fax2tiff.c)
 target_link_libraries(fax2tiff PRIVATE tiff port)
 
-add_executable(pal2rgb)
+add_executable(pal2rgb pal2rgb.c)
 target_sources(pal2rgb PRIVATE pal2rgb.c)
 target_link_libraries(pal2rgb PRIVATE tiff port)
 
-add_executable(ppm2tiff)
+add_executable(ppm2tiff ppm2tiff.c)
 target_sources(ppm2tiff PRIVATE ppm2tiff.c)
 target_link_libraries(ppm2tiff PRIVATE tiff port)
 
-add_executable(raw2tiff)
+add_executable(raw2tiff raw2tiff.c)
 target_sources(raw2tiff PRIVATE raw2tiff.c)
 target_link_libraries(raw2tiff PRIVATE tiff port CMath::CMath)
 
-add_executable(rgb2ycbcr)
+add_executable(rgb2ycbcr rgb2ycbcr.c)
 target_sources(rgb2ycbcr PRIVATE rgb2ycbcr.c)
 target_link_libraries(rgb2ycbcr PRIVATE tiff port)
 
-add_executable(thumbnail)
+add_executable(thumbnail thumbnail.c)
 target_sources(thumbnail PRIVATE thumbnail.c)
 target_link_libraries(thumbnail PRIVATE tiff port CMath::CMath)
 
-add_executable(tiff2bw)
+add_executable(tiff2bw tiff2bw.c)
 target_sources(tiff2bw PRIVATE tiff2bw.c)
 target_link_libraries(tiff2bw PRIVATE tiff port)
 
-add_executable(tiff2pdf)
+add_executable(tiff2pdf tiff2pdf.c)
 target_sources(tiff2pdf PRIVATE tiff2pdf.c)
 target_link_libraries(tiff2pdf PRIVATE tiff port)
 
-add_executable(tiff2ps)
+add_executable(tiff2ps tiff2ps.c)
 target_sources(tiff2ps PRIVATE tiff2ps.c)
 target_link_libraries(tiff2ps PRIVATE tiff port CMath::CMath)
 
-add_executable(tiff2rgba)
+add_executable(tiff2rgba tiff2rgba.c)
 target_sources(tiff2rgba PRIVATE tiff2rgba.c)
 target_link_libraries(tiff2rgba PRIVATE tiff port)
 
-add_executable(tiffcmp)
+add_executable(tiffcmp tiffcmp.c)
 target_sources(tiffcmp PRIVATE tiffcmp.c)
 target_link_libraries(tiffcmp PRIVATE tiff port)
 
-add_executable(tiffcp)
+add_executable(tiffcp tiffcp.c)
 target_sources(tiffcp PRIVATE tiffcp.c)
-target_link_libraries(tiffcp PRIVATE tiff port)
+target_link_libraries(tiffcp PRIVATE tiff port)
 
-add_executable(tiffcrop)
+add_executable(tiffcrop tiffcrop.c)
 target_sources(tiffcrop PRIVATE tiffcrop.c)
 target_link_libraries(tiffcrop PRIVATE tiff port CMath::CMath)
 
-add_executable(tiffdither)
+add_executable(tiffdither tiffdither.c)
 target_sources(tiffdither PRIVATE tiffdither.c)
 target_link_libraries(tiffdither PRIVATE tiff port)
 
-add_executable(tiffdump)
+add_executable(tiffdump tiffdump.c)
 target_sources(tiffdump PRIVATE tiffdump.c)
 target_link_libraries(tiffdump PRIVATE tiff port)
 
-add_executable(tiffinfo)
+add_executable(tiffinfo tiffinfo.c)
 target_sources(tiffinfo PRIVATE tiffinfo.c)
 target_link_libraries(tiffinfo PRIVATE tiff port)
 
-add_executable(tiffmedian)
+add_executable(tiffmedian tiffmedian.c)
 target_sources(tiffmedian PRIVATE tiffmedian.c)
 target_link_libraries(tiffmedian PRIVATE tiff port)
 
-add_executable(tiffset)
+add_executable(tiffset tiffset.c)
 target_sources(tiffset PRIVATE tiffset.c)
 target_link_libraries(tiffset PRIVATE tiff port)
 
-add_executable(tiffsplit)
+add_executable(tiffsplit tiffsplit.c)
 target_sources(tiffsplit PRIVATE tiffsplit.c)
 target_link_libraries(tiffsplit PRIVATE t

@@ -125,8 +105,7 @@ install(TARGETS fax2ps
         RUNTIME DESTINATION "${CMAKE_INSTALL_FULL_BINDIR}")
 
 if(HAVE_OPENGL)
-  add_executable(tiffgt)
-  target_sources(tiffgt PRIVATE tiffgt.c)
+  add_executable(tiffgt tiffgt.c)
   target_link_libraries(tiffgt PRIVATE tiff port)
   target_link_libraries(tiffgt PRIVATE OpenGL::GL GLUT::GLUT)
 
--- a/libtiff/CMakeLists.txt
+++ b/libtiff/CMakeLists.txt
@@ -161,8 +161,7 @@ if(CXX_SUPPORT)
   set(tiffxx_HEADERS
           tiffio.hxx)
 
-  add_library(tiffxx)
-  target_sources(tiffxx PRIVATE
+  add_library(tiffxx
           ${tiffxx_HEADERS}
           tif_stream.cxx)
   target_link_libraries(tiffxx tiff)
